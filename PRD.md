# 记账助手 - 需求文档 (PRD)

> 版本: v1.0  
> 创建时间: 2026-02-03  
> 技术栈: Vue3 + Ant Design Vue + Pinia + ECharts

---

## 一、项目概述

### 1.1 产品定位
一款面向个人用户的日常消费记录与分析工具，帮助用户清晰了解资金流向，培养良好消费习惯。

### 1.2 核心价值
- **简单记账**: 3秒内完成一笔记录
- **智能统计**: 多维度数据分析，洞察消费模式
- **类型灵活**: 支持自定义消费类型，满足个性化需求
- **数据安全**: 本地存储，隐私无忧

---

## 二、功能需求

### 2.1 用户模块（基础）

#### 2.1.1 用户偏好设置
- 主题切换：浅色/深色模式
- 货币单位：¥（人民币）、$（美元）、€（欧元）
- 预算设置：月度预算上限，超支提醒

### 2.2 消费类型管理 ⭐核心功能

#### 2.2.1 类型属性
| 字段 | 类型 | 说明 |
|------|------|------|
| id | String | 唯一标识 |
| name | String | 类型名称（如：餐饮、交通） |
| icon | String | 图标标识 |
| color | String | 主题色（用于图表展示） |
| budget | Number | 该类型月度预算（可选） |
| isDefault | Boolean | 是否系统预设 |
| sortOrder | Number | 排序权重 |
| createdAt | Date | 创建时间 |

#### 2.2.2 功能操作
- **新增**: 填写名称、选择图标和颜色
- **编辑**: 修改名称、图标、颜色、预算
- **删除**: 软删除（保留历史记录关联）
- **排序**: 拖拽调整显示顺序
- **默认类型**: 系统预设 10+ 常用类型
  - 餐饮、交通、购物、娱乐、住房、医疗、教育、通讯、人情、其他

### 2.3 记账功能 ⭐核心功能

#### 2.3.1 消费记录属性
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | ✓ | 唯一标识 |
| amount | Number | ✓ | 金额（支持两位小数） |
| type | String | ✓ | 消费类型ID |
| date | Date | ✓ | 消费日期（默认今天） |
| note | String | - | 备注说明（最多100字） |
| paymentMethod | String | - | 支付方式 |
| location | String | - | 消费地点 |
| tags | Array | - | 标签（如：#工作日午餐） |
| images | Array | - | 票据照片（预留） |
| createdAt | Date | ✓ | 记录创建时间 |
| updatedAt | Date | ✓ | 最后更新时间 |

#### 2.3.2 支付方式选项
- 现金
- 微信支付
- 支付宝
- 信用卡
- 借记卡
- 其他

#### 2.3.3 快捷记账
- 常用金额快捷键（10、20、50、100、200、500）
- 上次消费类型记忆
- 模板功能（保存常用消费组合）

### 2.4 数据展示与统计 ⭐核心功能

#### 2.4.1 仪表盘首页
- **今日概览**: 今日支出、今日收入、笔数
- **本月概览**: 本月总支出、剩余预算、预算使用率
- **快捷入口**: 快速记账按钮
- **最近记录**: 最近5条消费记录
- **消费趋势**: 近7天支出折线图

#### 2.4.2 多维度统计

**周统计**
- 时间范围：本周（周一到周日）
- 展示内容：
  - 本周总支出
  - 日均支出
  - 各类别占比（饼图）
  - 每日趋势（柱状图）
  - 与上周对比（增长率）

**月统计**
- 时间范围：当月/可选月份
- 展示内容：
  - 月度总支出
  - 预算完成情况（进度条）
  - 各类别支出排行（Top 5）
  - 每日支出趋势（折线图）
  - 工作日 vs 周末 消费对比
  - 与上月、去年同期对比

**年统计**
- 时间范围：当年/可选年份
- 展示内容：
  - 年度总支出
  - 月均支出
  - 月度趋势（12个月柱状图）
  - 年度类别占比（环形图）
  - 季度分析（Q1-Q4对比）
  - 消费热力图（日历形式）

#### 2.4.3 数据筛选
- 时间范围：自定义起止日期
- 消费类型：多选筛选
- 金额范围：最小-最大
- 关键词搜索：备注内容

### 2.5 记录管理

#### 2.5.1 列表展示
- 分页展示（每页20条）
- 排序：按时间倒序（默认）、按金额
- 分组：按日期分组展示

#### 2.5.2 批量操作
- 批量删除
- 批量修改类型
- 数据导出（CSV/JSON）

---

## 三、页面规划

### 3.1 页面结构

```
Layout（布局框架）
├── Sidebar（侧边导航）
│   ├── Logo区域
│   ├── 导航菜单
│   │   ├── 仪表盘
│   │   ├── 记一笔
│   │   ├── 消费类型
│   │   └── 统计分析
│   └── 主题切换
├── Header（顶部栏）
│   ├── 页面标题
│   ├── 全局搜索
│   └── 用户设置
└── Content（内容区）
    └── 各页面内容
```

### 3.2 页面清单

| 页面 | 路由 | 核心功能 |
|------|------|----------|
| 仪表盘 | / | 数据概览、快捷操作、趋势展示 |
| 记一笔 | /record | 添加/编辑消费记录 |
| 消费类型 | /categories | 类型CRUD管理 |
| 统计分析 | /statistics | 周/月/年统计、图表 |
| 记录明细 | /records | 所有记录列表、筛选查询 |
| 设置 | /settings | 偏好设置、数据管理 |

---

## 四、技术架构

### 4.1 技术选型
- **框架**: Vue 3.4 + Composition API
- **UI库**: Ant Design Vue 4.x
- **状态管理**: Pinia
- **路由**: Vue Router 4
- **图表**: ECharts 5 + vue-echarts
- **日期**: Day.js
- **构建**: Vite 5
- **存储**: LocalStorage（JSON序列化）

### 4.2 目录结构
```
src/
├── assets/          # 静态资源
│   └── styles.css   # 全局样式
├── components/      # 公共组件
│   ├── Layout/      # 布局组件
│   ├── Charts/      # 图表组件
│   └── Common/      # 通用组件
├── views/           # 页面视图
│   ├── Dashboard.vue
│   ├── Record.vue
│   ├── Categories.vue
│   ├── Statistics.vue
│   ├── Records.vue
│   └── Settings.vue
├── stores/          # Pinia状态
│   ├── settings.js  # 用户设置
│   ├── categories.js # 消费类型
│   ├── records.js   # 消费记录
│   └── statistics.js # 统计数据
├── utils/           # 工具函数
│   ├── storage.js   # 本地存储封装
│   ├── format.js    # 格式化工具
│   └── date.js      # 日期处理
├── router/          # 路由配置
│   └── index.js
├── App.vue          # 根组件
└── main.js          # 入口文件
```

### 4.3 数据存储设计

#### LocalStorage Key 规划
```
expense_tracker_settings    # 用户设置
expense_tracker_categories  # 消费类型列表
expense_tracker_records     # 消费记录列表
expense_tracker_version     # 数据版本（用于升级兼容）
```

### 4.4 性能优化
- 大数据量分页加载
- 图表懒加载
- 路由懒加载
- 本地数据缓存策略

---

## 五、设计规范

### 5.1 视觉风格
- **设计理念**: 简洁、专业、可信赖
- **主色调**: #1890ff（Ant Design 蓝）
- **辅助色**: #52c41a（成功）、#faad14（警告）、#f5222d（错误）
- **中性色**: #262626（主文字）、#595959（次要文字）、#bfbfbf（禁用）
- **背景色**: #f0f2f5（浅灰）、#141414（深色模式）

### 5.2 字体规范
- **标题**: 24px/32px/40px，font-weight: 600
- **正文**: 14px，line-height: 1.5
- **数据展示**: 使用等宽字体或 Tabular 数字

### 5.3 布局规范
- **侧边栏**: 宽度 220px，固定定位
- **内容区**: 最大宽度 1400px，居中
- **卡片间距**: 24px
- **圆角**: 8px（卡片）、4px（按钮输入框）

### 5.4 响应式断点
- 桌面: ≥1280px
- 平板: 768px-1279px（侧边栏收起）
- 手机: <768px（底部导航）

---

## 六、数据模型

### 6.1 消费类型 (Category)
```typescript
interface Category {
  id: string;
  name: string;
  icon: string;
  color: string;
  budget?: number;
  isDefault: boolean;
  sortOrder: number;
  createdAt: string;
}
```

### 6.2 消费记录 (Record)
```typescript
interface Record {
  id: string;
  amount: number;
  type: string; // category id
  date: string; // ISO date
  note?: string;
  paymentMethod: 'cash' | 'wechat' | 'alipay' | 'credit' | 'debit' | 'other';
  location?: string;
  tags?: string[];
  images?: string[];
  createdAt: string;
  updatedAt: string;
}
```

### 6.3 用户设置 (Settings)
```typescript
interface Settings {
  theme: 'light' | 'dark' | 'auto';
  currency: 'CNY' | 'USD' | 'EUR';
  monthlyBudget: number;
  weekStartsOn: 0 | 1; // 0=周日, 1=周一
  language: 'zh-CN' | 'en';
}
```

---

## 七、开发优先级

### Phase 1 - MVP（最小可用产品）
- [x] 项目框架搭建
- [x] 消费类型CRUD
- [x] 基础记账功能
- [x] 简单统计（本月总支出）
- [x] 数据本地存储

### Phase 2 - 核心功能完善
- [ ] 周/月/年统计图表
- [ ] 仪表盘首页
- [ ] 记录筛选查询
- [ ] 预算设置与提醒

### Phase 3 - 体验优化
- [ ] 深色模式
- [ ] 数据导入导出
- [ ] 快捷记账模板
- [ ] 响应式适配

### Phase 4 - 高级功能（未来）
- [ ] 多账本支持
- [ ] 云同步
- [ ] 多人共享账本
- [ ] 智能分析建议

---

## 八、验收标准

### 8.1 功能验收
- [ ] 可以正常添加、编辑、删除消费类型
- [ ] 可以正常添加、编辑、删除消费记录
- [ ] 统计页面正确展示周/月/年数据
- [ ] 数据持久化，刷新页面不丢失
- [ ] 预算超支时给出明显提示

### 8.2 性能验收
- [ ] 首屏加载 < 2s
- [ ] 页面切换流畅，无卡顿
- [ ] 图表渲染无延迟
- [ ] 1000条记录列表滑动流畅

### 8.3 设计验收
- [ ] 符合设计规范
- [ ] 深色/浅色模式切换正常
- [ ] 移动端基本可用
- [ ] 无明显视觉瑕疵

---

*文档结束*
